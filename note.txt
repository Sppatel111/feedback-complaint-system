pip freeze > requirements.txt
pip list
pip install -r requirements.txt

#### python all
https://www.datacamp.com/blog/what-is-python-used-for
##setting design
https://www.behance.net/gallery/184520011/User-Page?tracking_source=search_projects|settings+page+design&l=21
https://www.twilio.com/en-us/blog/a-phone-number-input-field-for-flask-forms

##manage users
https://www.phpkb.com/kb/article/managing-user-accounts-97.html
https://support.monday.com/hc/en-us/articles/360002426980-How-to-manage-users-on-your-account
https://docs.wavemaker.com/learn/v10.15/teams/manage-users/

{{ url_for('user.view_tickets') }}
{{ url_for('user.assign_task') }}
{{ url_for('user.a_settings') }}

# user_login_manager = LoginManager()
# user_login_manager.init_app(app)
# user_login_manager.login_view = "user.login"
# user_login_manager.session_cookie_name = 'user_session'
#
# admin_login_manager = LoginManager()
# admin_login_manager.init_app(app)
# admin_login_manager.login_view = "admin.login"
# admin_login_manager.session_cookie_name = 'admin_session'
#
# @user_login_manager.user_loader
# def load_user(user_id):
#     return User.query.filter_by(email=user_id, role='employee').first()
#
#
# @admin_login_manager.user_loader
# def load_admin(user_id):
#     return User.query.filter_by(email=user_id, role='admin').first()


# user_login_manager.session_cookie_name = 'user_session'
# admin_login_manager.session_cookie_name = 'admin_session'


  # response_text = request.form.get('response')
    # # if response_text:
    # #     new_response = FeedbackResponse(
    # #         ticket_id=ticket_id,
    # #         user_email=current_user.email,
    # #         response=response_text
    # #     )
    # #     db.session.add(new_response)
    # #     db.session.commit()
    # #     flash('Your response has been submitted!', 'success')
    # # else:
    # #     flash('Response cannot be empty.', 'danger')


{% extends 'admin_base.html' %}

{% block title %}Settings{% endblock %}

{% block content %}
<!-- Settings Content -->
<div class="container mt-5">
    <div class="text-center">
        <h1 class="mb-3">âš™ï¸ Admin Settings</h1>
        <p class="lead">Manage your account settings and security.</p>
    </div>

    <div class="container my-5">
       <hr>
        <div class="row">
            <div class="col-md-3">
                <div class="list-group">
                    <a href="{{ url_for('admin.a_details') }}" class="list-group-item list-group-item-action">Details</a>
                    <a href="{{ url_for('admin.change_password') }}" class="list-group-item list-group-item-action">Change Password</a>
                    <!-- Add more settings options here -->
                </div>
            </div>
            <div class="col-md-9">
                {% block settings_content %}{% endblock %}
            </div>
        </div>
    </div>
</div>

{% endblock %}

# @admin.route('/dashboard/managefeedback/assigntasks/<int:ticket_id>',methods=['GET','POST'])
# def ticket_status(ticket_id):
#     ticket = FeedbackTicket.query.get(ticket_id)
#     if ticket is None:
#         flash('Ticket not found.', 'danger')
#     return render_template("",ticket=ticket)

<div class="settings-content">
             <img src="{{ url_for('user.static', filename='assets/setting_image.jpg') }}"
                 alt="setting Image" class="img-fluid h-20 w-20" style="object-fit: cover; align:center;">
            {% block settings_content %}

            {% endblock %}
        </div>

https://alisonstech.ae/wp-content/uploads/2022/09/complaints-management-food-beverage.png


@user.route('/dashboard/settings/userdetails', methods=['GET', 'POST'])
def u_details():
    form = UserDetailForm(obj=current_user.user_detail)
    form.email.data = current_user.email
    form.department.data = current_user.department

    if form.validate_on_submit():
        if not current_user.user_detail:
            user_detail = Detail(email=current_user.email)
            db.session.add(user_detail)
        else:
            user_detail = current_user.user_detail
        # Update details
        user_detail.firstname = form.f_name.data
        user_detail.lastname = form.l_name.data
        user_detail.phone_number = form.phone.data

        db.session.commit()
        flash("Details updated successfully!", "success")
        return redirect(url_for("user.u_details"))

    return render_template("user_details.html", form=form, current_user=current_user)

def a_details():
    form = UserDetailForm(obj=current_user.user_detail)

    form.email.data = current_user.email
    form.department.data = current_user.department

    if form.validate_on_submit():
        print("Form Submitted!")
        print(f"First Name: {form.f_name.data}, Last Name: {form.l_name.data}, Phone: {form.phone.data}")
        if not current_user.user_detail:
            user_detail = Detail(email=current_user.email)
            db.session.add(user_detail)
        else:
            user_detail = current_user.user_detail

        print(f"Before update: {user_detail.firstname}, {user_detail.lastname}, {user_detail.phone_number}")

        # Update details
        user_detail.firstname = form.f_name.data
        user_detail.lastname = form.l_name.data
        user_detail.phone_number = form.phone.data

        print(f"After update: {user_detail.firstname}, {user_detail.lastname}, {user_detail.phone_number}")

        db.session.commit()
        flash("Details updated successfully!", "success")
        return redirect(url_for("admin.a_settings"))
    else:
        print("Else form not submitted")
    return render_template("user_details.html", form=form, current_user=current_user)


# priority: Mapped[str] = mapped_column(String, CheckConstraint("priority IN ('low', 'medium', 'high')"),
                                       default='medium')

SELECT conname, pg_get_constraintdef(oid) AS constraint_definition
FROM pg_constraint
WHERE conname = 'tasks_task_status_check';

admin
<!-- User Info Panel -->
<div class="col-lg-4 mb-4">
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-white border-bottom">
                    <h5 class="mb-0 text-dark">ğŸ‘¤ User Profile</h5>
                </div>
                <div class="card-body text-center">
                    <img src="{{ url_for('user.static', filename='assets/profiles/' + (user.user_detail.profile_image or 'default-profile.jpg')) }}"
                         class="rounded-circle border mb-3 shadow-sm" width="120" height="120">
                    <h5 class="fw-bold">{{ user.user_detail.firstname }} {{ user.user_detail.lastname }}</h5>
                    <p class="text-muted mb-1">{{ user.email }}</p>
                    <hr>
                    <div class="text-start">
                        <p><strong>ğŸ“Œ Role:</strong> {{ user.role|capitalize }}</p>
                        <p><strong>ğŸ¢ Department:</strong> {{ user.department or 'â€”' }}</p>
                        <p><strong>ğŸ“ Phone:</strong> {{ user.user_detail.phone_number or 'â€”' }}</p>
                        <p><strong>ğŸ”’ Status:</strong>
                            {% if user.is_active %}
                                <span class="badge bg-success">Active</span>
                            {% else %}
                                <span class="badge bg-secondary">Disabled</span>
                            {% endif %}
                        </p>
                    </div>
                    <a href="{{ url_for('admin.manage_users') }}" class="btn btn-outline-secondary w-100 mt-3">
                        <i class="fas fa-arrow-left"></i> Back to Users
                    </a>
                </div>
            </div>
        </div>

admin_login.html
{% extends 'admin_base.html' %}

{% block title %} Admin Login {% endblock %}

{% set show_navbar = False %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="row shadow-lg rounded bg-white overflow-hidden" style="max-width: 900px; width: 100%;">
        <!-- Left Side: Image -->
        <div class="col-md-6 d-none d-md-block p-0">
            <div class="left-side h-100">
                <img src="{{ url_for('user.static', filename='assets/login_image2.png') }}" alt="Login Image" class="img-fluid h-100 w-100" style="object-fit: cover;">
            </div>
        </div>

        <!-- Right Side: Login Card -->
        <div class="col-md-6 p-5 d-flex align-items-center">
            <div class="card w-100 shadow-sm p-4">
                <h2 class="text-center mb-4">Admin Login</h2>
                <form method="POST">
                    {{ form.hidden_tag() }}

                    <div class="mb-3">
                        {{ form.email.label(class="form-label") }}
                        {{ form.email(class="form-control", placeholder="Enter your email") }}
                        {% for error in form.email.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3">
                        {{ form.password.label(class="form-label") }}
                        {{ form.password(class="form-control", placeholder="Enter your password") }}
                        {% for error in form.password.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>

                    <!-- Centered Button -->
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>

                </form>
            </div>
        </div>

    </div>
</div>

{% endblock %}

screen size change
     <style>
        body {
        color: #626e78;
        }
      .table {
        color: #4d575e
        }
        .text-muted
        {
        color: #737d85 !important;
        }
        .text-dark {
            color: #060606 !important;
        }
        .text-secondary {
        color: #646d75;
        }
    </style>
    orginal
    .text-dark {
    color: #343a40 !important;
}

f_ticket.html
        <!--        flash -->
<!--           <div class="container mt-3">-->
<!--                {% with messages = get_flashed_messages(with_categories=true) %}-->
<!--                    {% if messages %}-->
<!--                        <div class="alert alert-dismissible alert-success">-->
<!--                            <button type="button" class="close" data-dismiss="alert">&times;</button>-->
<!--                            <a href="#" class="alert-link">-->
<!--                                <ul class="flashes">-->
<!--                                    {% for category, message in messages %}-->
<!--                                        <li class="{{ category }}">{{ message }}</li>-->
<!--                                    {% endfor %}-->
<!--                                </ul>-->
<!--                            </a>-->
<!--                        </div>-->
<!--                    {% endif %}-->
<!--                {% endwith %}-->
<!--            </div>-->
{% extends "user_base.html" %}

{% block title %}Feedback Tickets{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-start py-5">
    <div class="card shadow-lg border-0 rounded-4 px-4 py-4 w-100" style="max-width: 1300px;">
        <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center">
            <h5 class="mb-0 text-dark">ğŸ“¬ All Feedback Tickets</h5>
        </div>
        <div class="card-body">
            {% if tickets %}
                <div class="table-responsive">
                    <table class="table text-center align-middle" style="font-size: 14px;">
                        <thead style="background-color: #f9f9f9;">
                            <tr class="text-uppercase fw-bold text-secondary small" style="letter-spacing: 0.05em;">
                                <th class="border-0 py-3">Ticket ID</th>
                                <th class="border-0 py-3">Department</th>
                                <th class="border-0 py-3">Label</th>
                                <th class="border-0 py-3 text-start">Question</th>
                                <th class="border-0 py-3">Status</th>
                                <th class="border-0 py-3">Created At</th>
                                <th class="border-0 py-3">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for ticket in tickets %}
                            <tr>
                                <td>{{ ticket.ticket_id }}</td>
                                <td>{{ ticket.department_name }}</td>
                                <td>{{ ticket.ticket_label }}</td>
                                <td class="text-start">{{ ticket.question }}</td>
                                <td>
                                    <span class="badge text-uppercase fw-semibold px-3 py-2"
                                          style="border-radius: 5px;
                                            {% if ticket.ticket_status == 'open' %}background-color: #17a2b8; color: white;
                                            {% elif ticket.ticket_status == 'in_progress' %}background-color: #ffc107; color: black;
                                            {% elif ticket.ticket_status == 'closed' %}background-color: #28a745; color: white;
                                            {% else %}background-color: #6c757d; color: white;{% endif %}">
                                        {{ ticket.ticket_status.replace('_', ' ') }}
                                    </span>
                                </td>
                                <td>{{ ticket.created_at }}</td>
                                <td>
                                    <a href="{{ url_for('user.ticket_detail_response', ticket_id=ticket.ticket_id) }}"
                                       class="btn btn-outline-dark btn-sm w-100">
                                        <i class="fas fa-eye me-1"></i> View
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="alert alert-info text-center mb-0">
                    No tickets available for your department.
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

# @user.route('dashboard/complaint-center/complaint-history', methods=['GET', 'POST'])
# @login_required
# def complaint_history():
#     return render_template("complaint_history.html")

# @user.route('dashboard/complaint-center/complaint-history', methods=['GET'])
# @login_required
# def complaint_history():
#     complaints = Complaint.query.filter_by(user_email=current_user.email).order_by(Complaint.created_at.desc()).all()
#     return render_template("complaint_history.html", complaints=complaints)



