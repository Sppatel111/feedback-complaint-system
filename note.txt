pip freeze > requirements.txt
pip list

pip install -r requirements.txt

{{ url_for('user.view_tickets') }}
{{ url_for('user.assign_task') }}
{{ url_for('user.a_settings') }}

# user_login_manager = LoginManager()
# user_login_manager.init_app(app)
# user_login_manager.login_view = "user.login"
# user_login_manager.session_cookie_name = 'user_session'
#
# admin_login_manager = LoginManager()
# admin_login_manager.init_app(app)
# admin_login_manager.login_view = "admin.login"
# admin_login_manager.session_cookie_name = 'admin_session'
#
# @user_login_manager.user_loader
# def load_user(user_id):
#     return User.query.filter_by(email=user_id, role='employee').first()
#
#
# @admin_login_manager.user_loader
# def load_admin(user_id):
#     return User.query.filter_by(email=user_id, role='admin').first()


# user_login_manager.session_cookie_name = 'user_session'
# admin_login_manager.session_cookie_name = 'admin_session'


  # response_text = request.form.get('response')
    # # if response_text:
    # #     new_response = FeedbackResponse(
    # #         ticket_id=ticket_id,
    # #         user_email=current_user.email,
    # #         response=response_text
    # #     )
    # #     db.session.add(new_response)
    # #     db.session.commit()
    # #     flash('Your response has been submitted!', 'success')
    # # else:
    # #     flash('Response cannot be empty.', 'danger')


{% extends 'admin_base.html' %}

{% block title %}Settings{% endblock %}

{% block content %}
<!-- Settings Content -->
<div class="container mt-5">
    <div class="text-center">
        <h1 class="mb-3">⚙️ Admin Settings</h1>
        <p class="lead">Manage your account settings and security.</p>
    </div>

    <div class="container my-5">
       <hr>
        <div class="row">
            <div class="col-md-3">
                <div class="list-group">
                    <a href="{{ url_for('admin.a_details') }}" class="list-group-item list-group-item-action">Details</a>
                    <a href="{{ url_for('admin.change_password') }}" class="list-group-item list-group-item-action">Change Password</a>
                    <!-- Add more settings options here -->
                </div>
            </div>
            <div class="col-md-9">
                {% block settings_content %}{% endblock %}
            </div>
        </div>
    </div>
</div>

{% endblock %}

# @admin.route('/dashboard/managefeedback/assigntasks/<int:ticket_id>',methods=['GET','POST'])
# def ticket_status(ticket_id):
#     ticket = FeedbackTicket.query.get(ticket_id)
#     if ticket is None:
#         flash('Ticket not found.', 'danger')
#     return render_template("",ticket=ticket)

<div class="settings-content">
             <img src="{{ url_for('user.static', filename='assets/setting_image.jpg') }}"
                 alt="setting Image" class="img-fluid h-20 w-20" style="object-fit: cover; align:center;">
            {% block settings_content %}

            {% endblock %}
        </div>

https://alisonstech.ae/wp-content/uploads/2022/09/complaints-management-food-beverage.png


@user.route('/dashboard/settings/userdetails', methods=['GET', 'POST'])
def u_details():
    form = UserDetailForm(obj=current_user.user_detail)
    form.email.data = current_user.email
    form.department.data = current_user.department

    if form.validate_on_submit():
        if not current_user.user_detail:
            user_detail = Detail(email=current_user.email)
            db.session.add(user_detail)
        else:
            user_detail = current_user.user_detail
        # Update details
        user_detail.firstname = form.f_name.data
        user_detail.lastname = form.l_name.data
        user_detail.phone_number = form.phone.data

        db.session.commit()
        flash("Details updated successfully!", "success")
        return redirect(url_for("user.u_details"))

    return render_template("user_details.html", form=form, current_user=current_user)

def a_details():
    form = UserDetailForm(obj=current_user.user_detail)

    form.email.data = current_user.email
    form.department.data = current_user.department

    if form.validate_on_submit():
        print("Form Submitted!")
        print(f"First Name: {form.f_name.data}, Last Name: {form.l_name.data}, Phone: {form.phone.data}")
        if not current_user.user_detail:
            user_detail = Detail(email=current_user.email)
            db.session.add(user_detail)
        else:
            user_detail = current_user.user_detail

        print(f"Before update: {user_detail.firstname}, {user_detail.lastname}, {user_detail.phone_number}")

        # Update details
        user_detail.firstname = form.f_name.data
        user_detail.lastname = form.l_name.data
        user_detail.phone_number = form.phone.data

        print(f"After update: {user_detail.firstname}, {user_detail.lastname}, {user_detail.phone_number}")

        db.session.commit()
        flash("Details updated successfully!", "success")
        return redirect(url_for("admin.a_settings"))
    else:
        print("Else form not submitted")
    return render_template("user_details.html", form=form, current_user=current_user)



#### python all
https://www.datacamp.com/blog/what-is-python-used-for

# priority: Mapped[str] = mapped_column(String, CheckConstraint("priority IN ('low', 'medium', 'high')"),
                                       default='medium')

SELECT conname, pg_get_constraintdef(oid) AS constraint_definition
FROM pg_constraint
WHERE conname = 'tasks_task_status_check';
